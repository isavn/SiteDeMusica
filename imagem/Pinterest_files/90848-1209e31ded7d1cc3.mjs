(self.modernJsonp=self.modernJsonp||[]).push([["90848"],{391849:function(e,t,i){i.d(t,{hA:()=>v,tX:()=>D,ZP:()=>f,p:()=>C});var n=i(852171);let s=Object.freeze({DAILY:1,WEEKLY:2,BIWEEKLY:3,MONTHLY:4}),r=Object.freeze({ONE_WEEK:"7D",ONE_MONTH:"30D",THREE_MONTH:"90D",SIX_MONTH:"180D",ONE_YEAR:"365D",TWO_YEAR:"730D"}),a=new n.Ry(10),o=new n.H3([a]),E=new n.H3([o]),l=new n.H3([E]),_=new n.H3([l]),d=Object.freeze({AGE_18_24:"18-24",AGE_21_24:"21-24",AGE_18_20:"18-20",AGE_25_34:"25-34",AGE_35_44:"35-44",AGE_45_49:"45-49",AGE_50_54:"50-54",AGE_55_64:"55-64",AGE_65_PLUS:"65+"}),T={[d.AGE_18_20]:2,[d.AGE_21_24]:3,[d.AGE_25_34]:4,[d.AGE_35_44]:5,[d.AGE_45_49]:6,[d.AGE_50_54]:7,[d.AGE_55_64]:8,[d.AGE_65_PLUS]:9,AGE_UNSUPORTED:10},u=r.ONE_MONTH,p={[r.ONE_WEEK]:s.DAILY,[r.ONE_MONTH]:s.DAILY,[r.THREE_MONTH]:s.WEEKLY,[r.SIX_MONTH]:s.WEEKLY,[r.ONE_YEAR]:s.WEEKLY},c=Object.freeze({DETAIL:"/detail/",HOME:"/"}),A={[r.ONE_WEEK]:1,[r.ONE_MONTH]:2,[r.THREE_MONTH]:3,[r.SIX_MONTH]:4,[r.ONE_YEAR]:5},I={[r.ONE_WEEK]:7,[r.ONE_MONTH]:30,[r.THREE_MONTH]:90,[r.SIX_MONTH]:180,[r.ONE_YEAR]:365,[r.TWO_YEAR]:730},h={MALE:"male",FEMALE:"female",UNSPECIFIED:"unspecified"},R={...h,UNSPECIFIED:"unknown"},O={[h.MALE]:0,[h.FEMALE]:1,[h.UNSPECIFIED]:2},m={TOP_TRENDS_INTERNAL:"1",GROWING_TRENDS_INTERNAL:"2",BREAKOUT_TRENDS_INTERNAL:"3",SEASONAL_TRENDS_INTERNAL:"4",TOP_MONTHLY_TRENDS:"1",TOP_YEARLY_TRENDS:"2",GROWING_TRENDS:"3",SEASONAL_TRENDS:"4"},N=Object.freeze({[m.TOP_TRENDS_INTERNAL]:"Top Trends",[m.GROWING_TRENDS_INTERNAL]:"Growing Trends",[m.BREAKOUT_TRENDS_INTERNAL]:"Breakout Trends"}),S={[m.TOP_MONTHLY_TRENDS]:"Top Monthly Trends",[m.TOP_YEARLY_TRENDS]:"Top Yearly Trends",[m.GROWING_TRENDS]:"Growing Trends",[m.SEASONAL_TRENDS]:"Seasonal Trends"};Object.freeze({L1:1,L2:2,L3:3}),Object.freeze({ONE_MONTH:2,THREE_MONTHS:3,SIX_MONTHS:4,ONE_YEAR:5}),Object.freeze({HIGH_VOLUME:1,GROWTH:2});let b=Object.freeze({HIGH_VOLUME:"HIGH_VOLUME",GROWTH:"GROWTH"});Object.freeze({NC_ENGAGEMENT_PLUS_ACTIVE_FOLLOWERS_90d:1});let D=`https://trends.pinterest.com${c.DETAIL}`,g=Object.freeze([r.ONE_MONTH,r.ONE_YEAR,r.THREE_MONTH,r.ONE_MONTH]),v="https://i.pinimg.com/originals/3d/2f/41/3d2f41008f24a1839f25021cf78e908d.png",C=444,f={PAGES:c,TOAST_DURATION:3e3,Z_INDEX_TRENDS_HEADER:a,Z_INDEX_TRENDS_FEEDBACK_BUTTON:o,Z_INDEX_TRENDS_AUTOCOMPLETE_BOX:E,Z_INDEX_TRENDS_SEARCH_FORM:l,Z_INDEX_TRENDS_TOOLTIP:_,DEPRECATED_GESTALT_COLORS_HEX_VALUES:{red:"var(--base-color-red-300)",white:"#FFF",lightGray:"#EFEFEF",gray:"#8E8E8E",darkGray:"#333",green:"#0FA573",pine:"#0A6955",olive:"#364A4C",blue:"#4A90E2",navy:"#004B91",midnight:"#133A5E",purple:"#B469EB",orchid:"#8046A5",eggplant:"#5B2677",maroon:"#6E0F3C",watermelon:"#F13535",orange:"#E3780C"},MOBILE_MAX_WIDTH:576,FEEDBACK_CHAR_LIMIT:3e3,DEFAULT_CARD_WIDTH:357,DEFAULT_CARD_HEIGHT_RATIO:.65,FIVE_CARD_WIDTH:204,FIVE_CARD_HEIGHT_RATIO:.74,FIVE_LEFT_IMAGE_WIDTH_RATIO:.65,SMALL_CARD_WIDTH:220,DEFAULT_DAYS:"360",CARD_PADDING:10,FIVE_CARD_PADDING:24,PAGE_PADDING:160,MOBILE_HEIGHT:280,DESKTOP_HEIGHT:340,DESKTOP_PREDICTION_CHART_HEIGHT:480,DESKTOP_MOMENT_PREDICTION_CHART_HEIGHT:440,MOBILE_WIDTH:360,DESKTOP_WIDTH:900,CARD_WIDTH_PLUS_PADDING:377,AGE_21_PLUS:"21+",DEFAULT_COUNTRY:"US",TOP_TRENDS_PARAMETER:"topTrendsParameter",DEFAULT_DESIRED_CARD_PER_ROW:3,EXTERNAL_DESIRED_CARD_PER_ROW:5,DATE_FILTER_FORMAT:"MM/DD/YY",ALL:"all",TRENDS_CAMPAIGN_PLANNER:"TRENDS_CAMPAIGN_PLANNER",TRENDS:"TRENDS",PICK:"pick",PLUS_ICON:"+",MINUS_ICON:"-",FILTERABLE_TABLE_ROWS_PER_PAGE:Object.freeze({FIFTY:"50",ONE_HUNDRED:"100",TWO_HUNDRED_FIFTY:"250"}),DEBOUNCE_MILISECONDS:300,FILTER_SECTION:{FILTER_BAR_WIDTH:270,FILTER_BAR_MIN_HEIGHT:432,DATE_RANGE_WIDTH:178,DATE_PICKER_WIDTH:166,EXTERNAL_FILTER_BAR_WIDTH:225},DEFAULT_NUM_TOP_TRENDS:250,DEFAULT_EXTERNAL_NUM_TOP_TRENDS:50,GENDER:h,GENDER_MP:R,GENDER_TO_THRIFT_CONST:O,AGE_BUCKETS:d,AGE_TO_THRIFT_CONST:T,THRIFT_TO_AGE_CONST:{2:"18-20",3:"21-24",4:"25-34",5:"35-44",6:"45-49",7:"50-54",8:"55-64",9:"65+"},THRIFT_TO_GENDER_CONST:{0:"male",1:"female",2:"unknown"},LOOK_BACK_WINDOW:r,LOOK_BACK_WINDOW_DEFAULT:u,LOOK_BACK_WINDOW_TO_THRIFT_CONST:A,LOOK_BACK_WINDOW_TO_AGGREGATION_CONST:p,LOOK_BACK_WINDOW_TO_DAYS:I,TRENDS_TYPES:m,TRENDS_INTERNAL_TYPES_VALUES_TO_LABELS:N,TRENDS_EXTERNAL_TYPES_VALUES_TO_LABELS:S,URL_PARAM_BOOLEAN_VALUES:{TRUE:"true",FALSE:"false"},SEASONALITY_SCORE_THRESHOLD:.825,SEASONALITY_SCORE_OLD_THRESHOLD:.75,SEASONALITY_SCORE_THRESHOLD_CUTOVER_DATE:"2024-04-08",SORT_ORDER:Object.freeze({DESC:"desc",ASC:"asc"}),FILTER_TYPES:Object.freeze({OPPORTUNITY:"OPPORTUNITY",CAMPAIGN:"CAMPAIGN"}),SORT_BY:Object.freeze({TREND_RANK:"TREND_RANK",TOTAL_SEARCH:"TOTAL_SEARCH",WEEKLY_CHANGE:"WEEKLY_CHANGE",MONTHLY_CHANGE:"MONTHLY_CHANGE",YEARLY_CHANGE:"YEARLY_CHANGE"}),URL_JOIN_SIGN:"|",CONCATENATED_STRING_SEPARATOR:", ",CSV_SEPARATOR:",",TERM_ALL:"all",DEBOUNCE_AUDIENCE_SIZE:1e3,MAX_ADD_TERMS:50,L1_SECTIONS:{ALL:{value:"all",label:"All categories"},FOOD_AND_DRINK:{value:"foodanddrink",label:"Food and drinks",id:"918530398158"},BEAUTY:{value:"beauty",label:"Beauty",id:"935541271955"},HOME_DECOR:{value:"homedecor",label:"Home decor",id:"935249274030"},FASHION:{value:"fashion",label:"Fashion",id:"948967005229"},TRAVEL:{value:"travel",label:"Travel",id:"908182459161"},ART:{value:"art",label:"Art",id:"961238559656"},QUOTES:{value:"quotes",label:"Quotes",id:"948192800438"},ENTERTAINMENT:{value:"entertainment",label:"Entertainment",id:"953061268473"},DIY_AND_CRAFTS:{value:"diyandcrafts",label:"DIY and crafts",id:"934876475639"},HEALTH:{value:"health",label:"Health",id:"898620064290"},WEDDINGS:{value:"weddings",label:"Wedding",id:"903260720461"},EVENT_PLANNING:{value:"eventplanning",label:"Event planning",id:"941870572865"},LAWN_AND_GARDEN:{value:"lawnandgarden",label:"Gardening",id:"909983286710"},ANIMALS:{value:"animals",label:"Animals",id:"925056443165"},PARENTING:{value:"parenting",label:"Parenting",id:"920236059316"},EDUCATION:{value:"education",label:"Education",id:"922134410098"},VEHICLES:{value:"vehicles",label:"Vehicles",id:"918093243960"},DESIGN:{value:"design",label:"Design",id:"902065567321"},SPORTS:{value:"sports",label:"Sport",id:"919812032692"},ELECTRONICS:{value:"electronics",label:"Electronics",id:"960887632144"},FINANCE:{value:"finance",label:"Finance",id:"913207199297"},ARCHITECTURE:{value:"architecture",label:"Architecture",id:"918105274631"}},BASE_BANNER_HEIGHT:627,COUNT_TYPES:{COUNT:"count",NORMALIZED_COUNT:"normalizedCount"},EXTERNAL_LOOKBACK_WINDOW_MAPPED_TREND_TYPES:g,FEEDBACK_SLACK_CHANNEL:"slack://channel?team=T024LJUGB&id=CKBF9A6EL",MAX_TERMS:4,COUNTRY_FULL_NAMES:{US:"the United States",CA:"Canada",GB:"the United Kingdom",IN:"India",AU:"Australia"},CONCATENATED_INTERESTS_PARAM_KEY:"concatenatedInterests",FILTER_INTEREST_IDS_PARAM_KEY:"filterInterestIds",FILTER_AGE_IDS_PARAM_KEY:"filterAgeIds",FILTER_GENDERS_PARAM_KEY:"filterGenders",EXPORT_TYPES:{DISCOVER:"discover",DETAILS:"details",CAMPAIGN:"campaignPlan"},EXPORT_NA:"N/A",EXPORT_ALL:"All",EXPORT_NONE:"None",ENGLISH_LANGUAGE_CODE:"en",KEYWORD_SPLIT_CHARACTER:`
`,COUNTRY_PREFIX_POSTAL_CODE_SEPARATOR:":",EXPORT_MESSAGE_HEADER:"Export in progress",DEPRECATED_COLOR_VALUES:["blue","green","purple","orange","red","maroon","orchid","navy","pine","watermelon"],EXPORT_MESSAGE:"This should only take a few seconds. Don't go back.",POPULAR_PINS_MAXIMUM_IMAGES:9,MAXIMUM_TERM_IMAGES_BULK_SIZE:250,TERM_IMAGE_MEMCACHE_KEY_PREFIX:"timg:",EXTRA_TERM_IMAGES:80,DESIRED_PIN_IMAGE_SIZE:"236x",PIN_IMAGE_URL_PREFIX:"https://i.pinimg.com/",PIN_IMAGE_URL_SUFFIX:".jpg",PIN_IMAGE_DEFAULT_CACHE_TIME_S:86400,DOUBLE_ROW_CARD_WIDTH:170,TOP_TRENDS_CAROUSEL_TERMS:9,TRENDS_FOR_PINS_MODULE_BREAK_WIDTH:1380,TRENDS_SEARCHBAR_HEIGHT:193,TOP_TRENDS_CAROUSEL_EXTENDED_TERMS:30,TOP_TRENDS_UNAUTH_CAROUSEL_TERMS:25,TOP_TRENDS_DOUBLE_ROW_MAX_TERMS:6,DETAILS_PAGE_SEARCH_OVERTIME_SUBTITLE_WIDTH:750,PT_IMAGE_SIZE:"236x",FILTERED_TABLE_IMAGE_SIZE:"30x30",TOP_TREND_CAROUSEL_IMAGE_SIZE:"236x",MOMENT_IMAGE_CARD_SIZE:"70x70",PERSONALIZED_TREND_TYPES:b,PREDICTION_SUPPORTED_COUNTRIES:["US"],MOMENT_PREDICTION_LOOKBACK_DAYS:730,MILLISECONDS_PER_DAY:864e5}},712392:function(e,t,i){i.d(t,{y1:()=>s});var n=i(667294);i(325476),(0,n.createContext)({isUpsellUnauthModalOpen:!1,openUpsellUnauthModal:()=>{},closeUpsellUnauthModal:()=>{}}),Object.freeze({IS_SEASONAL:"seasonal",TERMS:"terms",COUNTRY:"country",EDITORIAL_INDEX:"editorial",SHOULD_MOCK:"shouldMock",EMPTY_HERO_BANNER_MOCK:"emptyHeroBanner",TRENDS_PRESET:"trendsPreset",ADVERTISER_ID:"advertiserId",END_DATE:"endDate",SELECTED_END_DATE:"selectedEndDate",AGE_BUCKET:"ageBucket",GENDER:"gender",LOOK_BACK_WINDOW:"lookbackWindow",COUNTS_TYPE:"countsType",DATE_RANGE:"dateRange",AGGREGATION_LEVEL:"aggregationLevel",SORT_BY:"sortBy",SORT_ORDER:"sortOrder",L1_INTEREST_IDS:"l1InterestIds",L2_INTEREST_IDS:"l2InterestIds",L3_INTEREST_IDS:"l3InterestIds",KEYWORDS_TO_EXCLUDE:"keywordsToExclude",KEYWORDS_TO_INCLUDE:"keywordsToInclude",RANKING_METHOD:"rankingMethod",AGE_DETAILS_PAGE:"ageDetailsPage",GENDER_DETAILS_PAGE:"genderDetailsPage",TOP_TRENDS:"topTrends",MOMENTS:"moments",HAS_PREDICTIONS:"hasPredictions",SHOW_PREDICTION:"showPrediction",URL_PARAM_UTM_VALUES:Object.freeze({UTM_SOURCE:"utm_source",UTM_MEDIUM:"utm_medium",UTM_CAMPAIGN:"utm_campaign",UTM_CONTENT:"utm_content",UTM_TERM:"utm_term",UTM_CREATIVE:"utm_creative"}),EVENT:"event",GRAPH_EVENT:"graphEvent",PRODUCT_CATEGORIES:"product_categories",PAGE_NUMBER:"page",TOPIC_INTEREST_IDS:"topicInterestIds",PARENT_PRODUCT_CATEGORY:"parentProductCategory",SHOW_SIDE_NAV:"showSideNav",VIEW:"view",TAB:"tab",SHOW_UNAUTH_MODAL:"showUnauthModal",NEXT_URL:"nextUrl"}),i(230201),i(935059),i(774838),i(893957);let s=(e,t)=>{let i=(0,n.useRef)(void 0),s=()=>{i.current&&clearTimeout(i.current)};return(0,n.useEffect)(()=>s,[]),n=>{s(),i.current=setTimeout(()=>{e(n)},t)}}},325476:function(e,t,i){i.d(t,{Z:()=>E});var n=i(667294),s=i(312048),r=i(705590),a=i(575820),o=i(341687);let E=function(e,t,i){let E=(0,s.s0)(),{search:l,pathname:_="/"}=(0,s.TH)(),d=(0,n.useMemo)(()=>new URLSearchParams(l),[l]),T=n=>{let s="reset"!==t?(0,o.Z)(window.location.search):{},l=(0,r.Km)({..."resetWithoutRefresh"===t?{}:s,[e]:n});if(!t)return;let d=i?`${i}`:_,T=(0,a.ru)(d,{...l});("push"===t||"resetWithoutRefresh"===t)&&E(T),"replace"===t&&E(T,{replace:!0}),"reset"===t&&(window.location.href=T),"replaceWithoutRefresh"===t&&s[e]!==n&&window.history.replaceState(null,"",T)};return function(t){"function"==typeof t?T(t((0,r.AY)(d.get(e)))):T(t)}}},705590:function(e,t,i){i.d(t,{iF:()=>o,AY:()=>a,Km:()=>r});var n=i(391849);let s=["US","CA","IT+ES+PT+GR+MT","IT","ES","DE+AT+CH","DE","GB+IE","FR","SE+DK+FI+NO","NL+BE+LU","PL+RO+HU+SK+CZ","MX+AR+CO+CL","CO","AR","MX","BR","AU+NZ","JP","ID","IN","MY","PH","TH","SA","EG","TR","KR","AE+SA+KW+QA+OM+BH+EG+IQ+DZ","IL+NG+PK+ZA+TR+MA+IN","CR+DO+EC+GT+PE","CY+CZ+GR+HU+MT+PL+RO+SK"];n.ZP.FILTER_INTEREST_IDS_PARAM_KEY,n.ZP.FILTER_AGE_IDS_PARAM_KEY,n.ZP.FILTER_GENDERS_PARAM_KEY,Object.freeze({UTM_SOURCE:"utm_source"});let r=e=>{let t={};for(let i in e){let n=e[i];null!==i&&""!==i.trim()&&null!=n&&""!==n.toString().trim()&&(t[i]=n)}return t},a=e=>e&&null!=e&&/^\d+$/.test(e.toString())?parseInt(e.toString(),10):e,o=(e,t)=>s.includes(e)?t[e]:void 0},994507:function(e,t,i){i.d(t,{Ak:()=>_,Jr:()=>c,LG:()=>N,MK:()=>n,PW:()=>I,R8:()=>a,UF:()=>E,UO:()=>S,XN:()=>l,ZB:()=>b,_h:()=>p,cH:()=>r,dm:()=>D,fE:()=>R,fu:()=>d,iK:()=>O,iN:()=>s,js:()=>u,nZ:()=>A,ne:()=>o,pn:()=>m,tf:()=>h,vE:()=>T});let n=0,s=0,r=0,a=0,o=0,E="",l="",_="",d="",T="",u="",p="desktop",c=0,A={browserName:"",browserType:null,browserVersion:"",canUseNativeApp:!1,isTablet:!1,isMobile:!1,platform:"",platformVersion:[0,0,0],osName:null,raw:""},I=[],h=[],R=[],O=[],m=[],N=100,S=10,b=28,D=()=>({count:1,time:0,ts:Date.now()})},589172:function(e,t,i){i.d(t,{Z:()=>s});var n=i(501010);function s(e){let{expName:t,anyEnabled:i,group:s}=function({experimentsClient:e,skipActivation:t}){let{checkExperiment:i}=e,n=i("web_masonry_v2",{dangerouslySkipActivation:t});return n.group?{expName:"web_masonry_v2",...n}:{expName:"",anyEnabled:!1,group:""}}({experimentsClient:(0,n.Z)(),skipActivation:e?.skipActivation??!1});return{expName:t,anyEnabled:i,group:s,isMeasureAllEnabled:"enabled_measure_all"===s||"enabled_measure_all_impression_fix"===s,isImpressionFixEnabled:"control_impression_fix"===s||"enabled_impression_fix"===s||"enabled_measure_all_impression_fix"===s}}},79271:function(e,t,i){i.d(t,{Fw:()=>R,OC:()=>c,ZP:()=>h});var n=i(667294),s=i(230201),r=i(589172),a=i(609252),o=i(774838),E=i(739405),l=i(281213),_=i(358198),d=i(2061),T=i(767415),u=i(177433);let p=0,c=()=>p,A={ActivationCard:{impressionType:"activationCardImpressions",idType:"experienceIdStr",eventType:8547},Article:{impressionType:"articleImpressions",idType:"articleIdStr",eventType:3829},Banner:{impressionType:"bannerImpressions",idType:"userIdStr",eventType:9061},Board:{impressionType:"boardImpressions",idType:"boardIdStr",eventType:3700},Comment:{impressionType:"commentImpressions",idType:"commentIdStr",eventType:9127},Guide:{impressionType:"guideImpressions",idType:"term",eventType:7573},Interest:{impressionType:"topicImpressions",idType:"topicIdStr",eventType:3703},News:{impressionType:"newsHubData",idType:"newsIdStr",eventType:4110},OneBar:{impressionType:"oneBarImpressions",idType:"onebarIdStr",eventType:9993},Pin:{impressionType:"pinImpressions",idType:"pinIdStr",eventType:18},Search:{impressionType:"searchImpressions",idType:"term",eventType:3803},Story:{impressionType:"storyImpression",idType:"idStr",eventType:170},TodayArticle:{impressionType:"todayArticleImpressions",idType:"todayArticleIdStr",eventType:8569},User:{impressionType:"userImpressions",idType:"userIdStr",eventType:3704},AdsPreview:{impressionType:"AdsPreviewImpression",idType:"AdsPreviewStr",eventType:8600},BoardMoreIdeasRep:{impressionType:"boardMoreIdeasFeedUpsellImpressions",idType:"boardIdStr",eventType:10054},Notification:{impressionType:"notificationDetailImpressions",idType:"newsIdStr",eventType:4111},NotificationFeed:{impressionType:"notificationFeedImpressions",idType:"newsIdStr",eventType:4110},EditorialBoard:{impressionType:"editorialBoardImpressions",idType:"boardIdStr",eventType:3700},VaseAnnotation:{impressionType:"vaseAnnotationImpressions",idType:"vaseAnnotationUrlStr",eventType:16444}},I=({events:e,startTime:t,endTime:i})=>e?.filter(e=>e>=t&&e<=i)||[];function h({carouselData:e,closeupImpressionType:t,closeupNavigationType:i,componentType:c,contextLogData:h,clientTrackingParams:R,duploShouldTrackPinEvents:O,elementType:m,impressionAuxFields:N,inImpressionExp:S,impressionType:b,impressionsFramework:D,isPaused:g,loggingId:v,objectIdStr:C,slotIndex:f,trackCarousel:L,viewData:P,viewParameter:M,viewType:H,isPromoted:y,storyPinProductEventData:w}){let{logContextEvent:G}=(0,s.u)(),{logMrcVideoAdEventOnPlay:U}=(0,l.H)(),{addImpression:F}=(0,_.WW)()||{},{logStat:W}=(0,d.Yg)(),Y=D||a.Z,x=(0,n.useRef)(null),B=(0,n.useRef)(e=>{});B.current=n=>{let s=A[b],r=s.idType,a={clientTrackingParams:R,endTime:n.endTime,[r]:v,slotIndex:f,time:n.startTime,renderDuration:n.endTime-n.startTime,type:t,...N,forcedExit:"removed"===n.forcedExit?0:void 0};if("Pin"===b){p+=1;let e=[],t=n.visibleEvents||new Map,i=n.hiddenEvents||new Map;(N&&N.isPromoted||y)&&[1,50,80,2,102].forEach(s=>{let r=I({events:t.get(s),startTime:n.startTime,endTime:n.endTime}),a=I({events:i.get(s),startTime:n.startTime,endTime:n.endTime});r.forEach(t=>{e.push({type:s,time:t||0,visible:!0})}),a.forEach(t=>{e.push({type:s,time:t||0,visible:!1})})}),a={...a,pinCellWidth:n.pinCellWidth||0,pinCellHeight:n.pinCellHeight||0,windowWidth:window?.innerWidth,windowHeight:window?.innerHeight,visibleEvents:e.sort((e,t)=>e.time-t.time)},N?.nearDupSignature&&F&&c&&[13007,13176,68].includes(c)&&F(N.nearDupSignature)}let o={component:c,object_id_str:C,view_type:H,view_data:P||{},view_parameter:M};if(L)e&&L&&G({event_type:7352,event_data:{pinCarouselSlotImpressions:[{...a,..."canonical"===e.type?{carouselDataId:Number(e.carouselId??0),slotIndex:e.index,carouselSlotId:e.carouselSlots?.[e.index??0]&&Number(e.carouselSlots[e.index??0].slotId)}:{carouselDataId:Number(e.id??0),carouselSlotId:e.carousel_slots?.[e.index??0]&&Number(e.carousel_slots[e.index??0].id),slotIndex:e.index}}]},...o,aux_data:{...h}});else{let e={clientTrackingParams:R,event_type:s.eventType,...o,element:m,event_data:{[s.impressionType]:"Story"===b?a:[a],...w?{storyPinProductEventData:w}:{}},aux_data:{closeup_navigation_type:i,...h}};G(e),U(e)}O&&W("log_pin_impression")};let{expName:k,group:K}=(0,r.Z)({skipActivation:!0}),V=(0,E.ZP)(),Z=(0,u.Zv)(),{isAuthenticated:j}=(0,o.B)(),X=(0,n.useCallback)(()=>{let e=!1;try{let{current:t}=x;if(t instanceof HTMLElement&&(!y||t.getElementsByTagName("img").length>0)){let i=Y.start(t);i.onExitViewport(B.current).setDebugId(v||"unknown"),O&&i.onEnterViewport(()=>{W("log_pin_impression_track_enter_viewport")}),e=!0,K&&(0,T.nP)("webapp.masonry.trackImpression",{tags:{callsite:"app_packages_useImpressionTracker",deviceType:V,experimentName:k,group:K,handlerId:Z,isAuthenticated:j,slotIndex:f??"unknown"}})}}catch{window.console.error('Can only track impressions for type "HTMLElement"')}O&&W("log_pin_impression_track",{didStartTracking:e})},[x.current]);return(0,n.useEffect)(()=>(S&&!Y.inExperiment&&Y.setExperimentStatus(!0),g||X(),()=>{let{current:e}=x;e instanceof HTMLElement&&(!y||e.getElementsByTagName("img").length>0)&&Y.stop(e)}),[g,X]),x}let R=({children:e,...t})=>e({impressionTrackerRef:h(t)})},936367:function(e,t,i){function n(e,t,i){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:n+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}i.d(t,{Z3:()=>d,ZP:()=>u,LU:()=>T});let s=window.location.search.includes("debug_impressions=1")||document.cookie&&document.cookie.indexOf("debug_impressions=1")>-1,r={paused:"Pause",resumed:"Resume",stopped:"Flush",enter:"Enter viewport",exit:"Exit viewport"},a={},o={background:"#FF8A8A",transform:"scale(.98)"},E={init:e=>({transform:`scale(${a[e]?.8:.99})`,transition:"transform .2s ease-in-out",background:"#8E8E8E"}),[r.enter]:{background:"#A0DCC8",transform:"scale(.99)"},[r.exit]:o,[r.stopped]:o,[r.paused]:o,[r.resumed]:{background:"#0FA573",transform:"scale(.99)"}};class l{constructor(e){n(this,"lastIntersectionChange",null),n(this,"setMutationObserver",e=>(this.mutationObserver=e,this)),n(this,"startMutationObserver",e=>{this.mutationObserver&&this.mutationObserver.observe(this.node,e)}),n(this,"stopMutationObserver",()=>{this.mutationObserver&&this.mutationObserver.disconnect()}),n(this,"handleIntersectionVisibilityChange",(e,t)=>{this.lastIntersectionChange=e,[{type:1,isVisible:e=>{let t=e.rootBounds?.bottom??window.innerHeight;return e.isIntersecting&&e.boundingClientRect.top>=143&&e.boundingClientRect.top<t},isHidden:e=>{let t=e.rootBounds?.bottom??window.innerHeight;return!e.isIntersecting||e.boundingClientRect.top<143||e.boundingClientRect.top>=t}},{type:50,isVisible:e=>e.intersectionRatio>=.5,isHidden:e=>e.intersectionRatio<.5},{type:80,isVisible:e=>e.intersectionRatio>=.8,isHidden:e=>e.intersectionRatio<.8},{type:2,isVisible:e=>{let t=e.rootBounds?.bottom??window.innerHeight;return e.isIntersecting&&e.boundingClientRect.bottom<=t&&e.boundingClientRect.bottom>=143},isHidden:e=>{let t=e.rootBounds?.bottom??window.innerHeight;return!e.isIntersecting||e.boundingClientRect.bottom<143||e.boundingClientRect.bottom>t}}].forEach(({type:i,isVisible:n,isHidden:s})=>{n(e)?this.lastLoggedVisibleEvent[i]||(this.addVisibleEvent(i,t),this.lastLoggedVisibleEvent[i]=!0):s(e)&&this.lastLoggedVisibleEvent[i]&&(this.addHiddenEvent(i,t),this.lastLoggedVisibleEvent[i]=!1)})}),n(this,"handleIntersectionChange",e=>{let t=e.intersectionRatio>0||e.isIntersecting,i=Date.now();this.handleIntersectionVisibilityChange(e,i),t&&!this.inViewport?(this.startTime=i,this.pinCellWidth=this.node.offsetWidth,this.pinCellHeight=this.node.offsetHeight,this._debug(r.enter,{startTime:i,node:this.node}),this.enterCallbacks.forEach(e=>e())):!t&&this.inViewport&&(this._debug(r.exit,!0),this.exitCallbacks.forEach(e=>e(this.toJSON()))),this.inViewport=t}),this.enterCallbacks=[],this.exitCallbacks=[],this.inViewport=!1,this.node=e,this.startTime=0,this.debugId="",this.pinCellWidth=0,this.pinCellHeight=0,this.visibleEvents=new Map,this.hiddenEvents=new Map,this.lastLoggedVisibleEvent={1:!1,50:!1,80:!1,2:!1}}addVisibleEvent(e,t){let i=this.visibleEvents.get(e)||[];i.push(1e6*t),this.visibleEvents.set(e,i)}addHiddenEvent(e,t){let i=this.hiddenEvents.get(e)||[];i.push(1e6*t),this.hiddenEvents.set(e,i)}hasVisibleEvent(e){return this.visibleEvents.has(e)}hasHiddenEvent(e){return this.hiddenEvents.has(e)}onEnterViewport(e){return this.enterCallbacks.push(e),this}onExitViewport(e){return this.exitCallbacks.push(e),this}setDebugId(e){return this.debugId=e,s&&Object.assign(this.node.style,E.init(e)),this}pause(){return this.inViewport&&(this.addHiddenEvent(102,Date.now()),this._debug(r.paused,!0),this.exitCallbacks.forEach(e=>e(this.toJSON()))),this}resume(){if(this.inViewport){let e=Date.now();this._debug(r.resumed,{startTime:e}),this.startTime=e,this.addVisibleEvent(102,e),Object.keys(this.lastLoggedVisibleEvent).forEach(e=>{this.lastLoggedVisibleEvent[e]=!1}),this.lastIntersectionChange&&this.handleIntersectionVisibilityChange(this.lastIntersectionChange,e)}return this}stop(e){return this.inViewport&&(this._debug(r.stopped,!0),this.exitCallbacks.forEach(t=>t(this.toJSON(e)))),this}toJSON(e=""){return{startTime:1e6*this.startTime,endTime:1e6*Date.now(),forcedExit:e,pinCellWidth:this.pinCellWidth,pinCellHeight:this.pinCellHeight,visibleEvents:this.visibleEvents,hiddenEvents:this.hiddenEvents}}toDebugJSON(){return{pinID:this.debugId,startTime:this.startTime,endTime:Date.now(),duration:`${(Date.now()-this.startTime)/1e3} seconds`,pinCellWidth:this.pinCellWidth,pinCellHeight:this.pinCellHeight}}_debug(e,t){if(s)switch(window.console.log(`ðŸ“Œ ${e} -- ${this.debugId}`),!0===t&&window.console.log(this.toDebugJSON()),"object"==typeof t&&window.console.log(t),E[e]&&Object.assign(this.node.style,E[e]),e){case r.flushed:case r.paused:case r.exit:a[this.debugId]=!0}}}function _(e,t,i){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:n+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let d=!0,T=!1;class u{constructor(){_(this,"_delegateChange",e=>{e.forEach(e=>{let t=this.activeImpressions.get(e.target);t&&t.handleIntersectionChange(e)})}),_(this,"_handleMutations",(e,t)=>{let i=this.mutationObservers.get(t);i&&i.offsetHeight<1&&i&&this.stop(i,"removed")}),this.activeImpressions=new Map,this.mutationObservers=new Map,this.bottomHeight=0,this.bottomObstructions=new Set,this.pausePriority=T,this.observer=new window.IntersectionObserver(this._delegateChange),window.Cypress&&!window.activeImpressions&&(window.activeImpressions=new Map),this.paused=!1,this.topHeight=0,this.topObstructions=new Set,this.inExperiment=!1}setExperimentStatus(e){this.inExperiment!==e&&(this.inExperiment=e)}stop(e,t=""){let i=this.activeImpressions.get(e);i&&(i.stop(t),i.mutationObserver&&this.mutationObservers.delete(i.mutationObserver),i.stopMutationObserver(),this.activeImpressions.delete(e),window.activeImpressions?.delete(e),this.observer?.unobserve(e))}start(e){let t=this.activeImpressions.get(e);if(!t){t=new l(e),this.activeImpressions.set(e,t),window.activeImpressions?.set(e,t),this.observer?.observe(e);let i=(e,t)=>this._handleMutations(e,t);t.setMutationObserver(new window.MutationObserver(i)),t.mutationObserver&&this.mutationObservers.set(t.mutationObserver,e),t.startMutationObserver({subtree:!0,attributes:!0,attributeFilter:["style"]})}return t}pause(e=d){this.paused||(Array.from(this.activeImpressions.values()).forEach(e=>e.pause()),this.paused=!0,this.pausePriority===T&&(this.pausePriority=e))}resume(e=d){(e!==T||this.pausePriority!==d)&&this.paused&&(Array.from(this.activeImpressions.values()).forEach(e=>e.resume()),this.paused=!1,this.pausePriority=T)}addObstruction(e,t){"top"===e?this.topObstructions.add(t):"bottom"===e&&this.bottomObstructions.add(t),this._calculateRootMargins()}removeObstruction(e,t){"top"===e?this.topObstructions.delete(t):"bottom"===e&&this.bottomObstructions.delete(t),this._calculateRootMargins()}updateObstructions(){this._calculateRootMargins()}_calculateRootMargins(){let e=Array.from(this.topObstructions).reduce((e,t)=>{let{bottom:i}=t.getBoundingClientRect();return i>e?i:e},0),t=window.innerHeight-Array.from(this.bottomObstructions).reduce((e,t)=>{let{top:i}=t.getBoundingClientRect();return i<e?i:e},window.innerHeight);if(e!==this.topHeight||t!==this.bottomHeight){let i={rootMargin:`${-e}px 0px ${-t}px`,threshold:[0,.5,.8,1]};this.observer?.disconnect(),this.observer=new window.IntersectionObserver(this._delegateChange,i),Array.from(this.activeImpressions.values()).forEach(e=>this.observer?.observe(e.node)),this.topHeight=e,this.bottomHeight=t}}}},609252:function(e,t,i){i.d(t,{Z:()=>n});let n=new(i(936367)).ZP},281213:function(e,t,i){i.d(t,{H:()=>l,W:()=>_});var n=i(667294),s=i(230201),r=i(213491),a=i(501010),o=i(785893);let{Provider:E,get:l}=(0,r.Z)("VideoPlayer");function _({children:e}){let{logContextEvent:t,logImpression:i}=(0,s.u)(),{checkExperiment:r}=(0,a.Z)(),[l,_]=(0,n.useState)(!1),[d,T]=(0,n.useState)([]),[u,p]=(0,n.useState)([]),[c,A]=(0,n.useState)({}),I=r("web_ads_mrc_video_impression").anyEnabled,h=e=>{A(t=>({...t,[e]:!0}))},R=(0,n.useCallback)(e=>{if(18===e.event_type&&e.event_data?.pinImpressions?.length){let{isNativeVideoAndWatchable:t}=e.event_data.pinImpressions[0],i=JSON.stringify(e.aux_data?.commerce_data||"").includes("story_pin_id");I&&(t||i)&&T(t=>[...t,e].slice(-1e3))}},[I]),O=(0,n.useCallback)(e=>{18===e.eventType&&I&&p(t=>[...t,e].slice(-1e3))},[I]);(0,n.useEffect)(()=>{let e=d.filter(e=>{let{pinIdStr:i}=e.event_data.pinImpressions[0];return!c[i]||!I||(t((e=>{let{time:t}=e.event_data.pinImpressions[0];return{...e,event_data:{...e.event_data,pinImpressions:[{...e.event_data.pinImpressions[0],isMrcBtr:!0,endTime:t,renderDuration:0}]}}})(e)),!1)});e.length!==d.length&&T(e)},[d,I,t,c]),(0,n.useEffect)(()=>{let e=u.filter(e=>{let t=e.eventData?.pinIdStr;if(!t)return!1;if(c[t]&&I){let t=(e=>{if(e.eventData){let{time:t}=e.eventData;return{...e,eventData:{...e.eventData,isMrcBtr:!0,endTime:t??0}}}return null})(e);return t&&i(t),!1}return!0});e.length!==u.length&&p(e)},[u,I,i,c]);let m=(0,n.useMemo)(()=>({captionsEnabled:l,logMrcVideoAdImpressionOnPlay:O,logMrcVideoAdEventOnPlay:R,setCaptionsEnabled:_,setVideoPlayed:h,videosPlayed:c}),[l,R,O,c]);return(0,o.jsx)(E,{value:m,children:e})}},358198:function(e,t,i){i.d(t,{BW:()=>c,WW:()=>u});var n=i(686659),s=i(667294),r=i(712392),a=i(15881),o=i(213491),E=i(501010),l=i(418282),_=i(767415),d=i(785893);let{Provider:T,getMaybe:u}=(0,o.Z)("CloseupNearDupSigsTracker"),p=({group:e,children:t})=>{(0,s.useEffect)(()=>{(0,n.Z)("CloseupNearDupSigsTrackerContext","/app/www/closeup/CloseupNearDupSigsTrackerContext.tsx")},[]);let i=(0,l.Nl)(),o=(0,s.useRef)([]),E=(0,s.useRef)(new Set),u=(0,s.useRef)([]),p=(0,s.useRef)(new Set),c=(0,s.useRef)([null,[]]),A=(0,r.y1)(()=>{"enabled_skip_sync"!==e&&(i.setItem(a.S4,o.current),i.setItem(a.yb,u.current))},500),I=(0,s.useCallback)(()=>{if("enabled_skip_sync"===e)return;let t=Date.now(),n=i.getItem(a.S4),s=i.getItem(a.yb);if(n)try{Array.isArray(n)&&n.every(e=>"string"==typeof e)&&(o.current=n.slice(-5),E.current=new Set(o.current))}catch(e){(0,_.nP)("closeup_page.near_dup.session_storage_sync.closeup.fail",{sampleRate:1})}if(s)try{Array.isArray(s)&&s.every(e=>"string"==typeof e)&&(u.current=s.slice(-35),p.current=new Set(u.current))}catch(e){(0,_.nP)("closeup_page.near_dup.session_storage_sync.impression.fail",{sampleRate:1})}(0,_.LY)("closeup_page.near_dup.session_storage_sync.success",Date.now()-t,{sampleRate:.1,tags:{status:"success"}})},[o,u,i,e]),h=(0,s.useCallback)(e=>{if(p.current.has(e)&&(u.current=u.current.filter(t=>t!==e)),u.current.length>=35){let e=u.current.shift();e&&p.current.delete(e)}p.current.add(e),u.current.push(e)},[]),R=(0,s.useCallback)(e=>{if(E.current.has(e)&&(o.current=o.current.filter(t=>t!==e)),o.current.length>=5){let e=o.current.shift();e&&E.current.delete(e)}E.current.add(e),o.current.push(e),A()},[A]),O=(0,s.useCallback)(e=>{let[t,i]=c.current;if(t===e)return i;0===o.current.length&&0===u.current.length&&I();let n=Array.from(new Set([...u.current,...o.current]));return c.current=[e,n],n},[I]);(0,s.useEffect)(()=>A,[A]);let m=(0,s.useMemo)(()=>({addImpression:h,addCloseup:R,getTrackedNearDupSigs:O}),[h,R,O]);return(0,d.jsx)(T,{value:m,children:t})},c=({children:e})=>{(0,s.useEffect)(()=>{(0,n.Z)("CloseupNearDupSigsTrackerContext","/app/www/closeup/CloseupNearDupSigsTrackerContext.tsx")},[]);let{checkExperiment:t}=(0,E.Z)(),{anyEnabled:i,group:r}=t("web_closeup_rabbit_hole_dedup");return i&&r?(0,d.jsx)(p,{group:r,children:e}):(0,d.jsx)(T,{value:void 0,children:e})}},2061:function(e,t,i){i.d(t,{Yg:()=>E,ib:()=>_,nF:()=>T,xX:()=>d});var n=i(501010),s=i(774838),r=i(739405),a=i(767415);let o=({checkExperiment:e})=>{let{group:t}=e("auth_mweb_graphql_pin_page",{dangerouslySkipActivation:!0});return{logStat:(e,i)=>(0,a.nP)("webapp.graphql.debug_auth_mweb_graphql_pin_page",{sampleRate:1,tags:{event:e,group:t,...i}})}},E=()=>{let{isAuthenticated:e}=(0,s.B)(),t=(0,r.HG)(),{checkExperiment:i}=(0,n.Z)();return e&&!t?o({checkExperiment:i}):{logStat:()=>{}}},l=0,_=({checkExperiment:e,isAuthMweb:t})=>{if(!t)return;let{logStat:i}=o({checkExperiment:e});(l+=1)<10&&i(`repin_${l}`)};function d({checkExperiment:e,isDesktop:t,isAuthenticated:i}){if(!i)return{isGraphQLEnabledInGeneral:!0,isGraphQLEnabledForRelatedPins:!0,shouldPrefetchCloseupPreviewFragment:!1,isPartOfExperiment:!1};if(t){let{anyEnabled:t}=e("auth_dweb_graphql_pin_page");return{isGraphQLEnabledForRelatedPins:t,isGraphQLEnabledInGeneral:t,shouldPrefetchCloseupPreviewFragment:!1,isPartOfExperiment:!1}}{let{anyEnabled:t,group:i}=e("auth_mweb_graphql_pin_page");switch(i){case"control":return{isGraphQLEnabledInGeneral:!1,isGraphQLEnabledForRelatedPins:!1,shouldPrefetchCloseupPreviewFragment:!1,isPartOfExperiment:!0};case"enabled":return{isGraphQLEnabledInGeneral:!0,isGraphQLEnabledForRelatedPins:!0,shouldPrefetchCloseupPreviewFragment:!1,isPartOfExperiment:!0};case"enabled_prefetch_closeup_data":return{isGraphQLEnabledInGeneral:!0,isGraphQLEnabledForRelatedPins:!0,shouldPrefetchCloseupPreviewFragment:!0,isPartOfExperiment:!0};default:return{isGraphQLEnabledInGeneral:t,isGraphQLEnabledForRelatedPins:t,shouldPrefetchCloseupPreviewFragment:!1,isPartOfExperiment:!1}}}}function T(){let{checkExperiment:e}=(0,n.Z)(),t=(0,r.HG)(),{isAuthenticated:i}=(0,s.B)();return d({checkExperiment:e,isDesktop:t,isAuthenticated:i})}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/90848-1209e31ded7d1cc3.mjs.map